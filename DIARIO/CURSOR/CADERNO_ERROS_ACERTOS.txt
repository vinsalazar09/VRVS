â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“– CADERNO DE ERROS E ACERTOS - PLATAFORMA DE REVISÃƒO TEOT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**Este arquivo registra erros resolvidos, acertos e problemas conhecidos.**
**SEMPRE ADICIONAR ao final, NUNCA sobrescrever completamente.**

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“… REGISTRO DE CHATS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**CHAT INICIADO:** 2025-11-29 (Sexta-feira) ~17:00
**CHAT ENCERRADO:** 2025-11-29 (Sexta-feira) 17:57

**CHAT INICIADO:** 2025-12-02 (TerÃ§a-feira) 22:28

**CHAT INICIADO:** 2025-12-02 (TerÃ§a-feira) 23:35

**CHAT INICIADO:** 2025-12-11 (Quinta-feira) 18:30

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… ACERTOS E SOLUÃ‡Ã•ES BEM SUCEDIDAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**2025-11-29:**
- âœ… CriaÃ§Ã£o rÃ¡pida e eficiente de HTMLs interativos (dificuldade 2/10)
- âœ… Sistema de validaÃ§Ã£o automatizada com script Python
- âœ… AdaptaÃ§Ã£o fÃ¡cil de cores usando variÃ¡veis CSS
- âœ… Estrutura reutilizÃ¡vel para criaÃ§Ã£o de novos documentos HTML
- âœ… DocumentaÃ§Ã£o tÃ©cnica completa para facilitar replicaÃ§Ã£o

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âŒ ERROS RESOLVIDOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**2025-12-02:**
- âœ… **PROBLEMA CRÃTICO RESOLVIDO:** Itens na aba "PendÃªncias" nÃ£o respondiam ao clique/toque
  - **Causa:** IDs invÃ¡lidos (undefined/null) ou elementos filhos interceptando eventos
  - **SoluÃ§Ã£o implementada:**
    1. ValidaÃ§Ã£o de ID antes de renderizar (garantir que sempre seja string vÃ¡lida)
    2. SubstituiÃ§Ã£o de onclick inline por data-attribute + event delegation
    3. AdiÃ§Ã£o de `pointer-events: none` em elementos filhos para evitar interceptaÃ§Ã£o
    4. ValidaÃ§Ã£o robusta na funÃ§Ã£o togglePendencia() com conversÃ£o consistente para string
    5. Event delegation no container para garantir funcionamento mesmo com elementos filhos
  - **Itens afetados:** Fratura de clavÃ­cula, Epifisiolistese, Sd manguito rotador, DDQ, LuxaÃ§Ã£o e Instabilidade do cotovelo, LAC/LEC, Epicondilites, Fraturas do cotovelo
  - **PrevenÃ§Ã£o:** ValidaÃ§Ã£o de ID sempre que renderizar, uso de event delegation, proteÃ§Ã£o contra IDs invÃ¡lidos

- âœ… **CORREÃ‡ÃƒO ADICIONAL (02/12/2025):** Event listener sendo adicionado mÃºltiplas vezes causando travamentos
  - **Causa:** Event listener era adicionado toda vez que `renderPendencias()` era chamado, criando mÃºltiplos listeners no mesmo elemento
  - **SoluÃ§Ã£o:** Criada funÃ§Ã£o `inicializarEventListenersPendencias()` que adiciona o listener apenas uma vez durante inicializaÃ§Ã£o, removendo listener antigo se existir
  - **PrevenÃ§Ã£o:** Sempre usar event delegation com funÃ§Ã£o nomeada que pode ser removida, adicionar listener apenas uma vez durante inicializaÃ§Ã£o

- âœ… **CORREÃ‡ÃƒO CRÃTICA MOBILE (02/12/2025):** MudanÃ§a para onclick inline (soluÃ§Ã£o mais simples e que funciona)
  - **Causa:** Event delegation com touchend nÃ£o estava funcionando no iPhone. Tentativa anterior de adicionar listeners programaticamente falhou
  - **SoluÃ§Ã£o:** Mudado para usar `onclick` inline diretamente no HTML, igual Ã s tabs que funcionam. Removida funÃ§Ã£o `inicializarEventListenersPendencias()` e event delegation complexa
  - **LiÃ§Ã£o:** Quando algo nÃ£o funciona, voltar ao bÃ¡sico. Se tabs funcionam com onclick inline, usar a mesma abordagem. NÃ£o complicar com event delegation quando onclick inline resolve
  - **PrevenÃ§Ã£o:** SEMPRE usar a soluÃ§Ã£o mais simples primeiro. Se outros elementos similares funcionam com onclick inline, usar a mesma abordagem antes de tentar soluÃ§Ãµes complexas

- âœ… **CORREÃ‡ÃƒO DEFINITIVA (02/12/2025) - DIAGNÃ“STICO OPUS:** IDs com underscore causavam erro de sintaxe JavaScript no onclick
  - **Causa Raiz Identificada pelo Opus:** IDs gerados sem valor no CSV recebem formato `${Date.now()}_${lineNum}` (ex: "1733174400000_5"). Quando usado sem aspas no onclick: `onclick="togglePendencia(1733174400000_5)"`, isso Ã© sintaxe JavaScript invÃ¡lida (underscore nÃ£o Ã© vÃ¡lido em literal numÃ©rico). Navegador ignora silenciosamente o onclick mal formado.
  - **Por que alguns funcionavam:** Itens com ID numÃ©rico puro no CSV funcionavam. Itens sem ID (que recebiam ID gerado com underscore) falhavam.
  - **SoluÃ§Ã£o:** Sempre usar aspas no onclick para tratar ID como string: `onclick="togglePendencia('${temaIdStr}')"`. Isso funciona tanto para nÃºmeros quanto strings com underscore.
  - **LiÃ§Ã£o:** Sempre usar aspas em valores interpolados em atributos HTML que serÃ£o interpretados como JavaScript. Nunca assumir que valores sÃ£o sempre nÃºmeros. Erros de sintaxe JavaScript em atributos HTML sÃ£o ignorados silenciosamente pelo navegador.
  - **PrevenÃ§Ã£o:** SEMPRE usar aspas ao interpolar valores em atributos onclick/on* que serÃ£o interpretados como JavaScript. Validar formato de IDs gerados automaticamente.

- âš ï¸ **PROBLEMA PERSISTENTE (03/12/2025) - iOS Safari PWA:** Alguns itens na aba PendÃªncias nÃ£o respondem ao toque no iPhone, mesmo apÃ³s mÃºltiplas correÃ§Ãµes
  - **Comportamento:** No MacBook (Chrome/Safari) funciona perfeitamente. No iPhone (Safari iOS, PWA instalado) alguns itens especÃ­ficos nÃ£o respondem ao toque, enquanto outros funcionam normalmente.
  - **Itens afetados:** Fratura de clavÃ­cula, Epifisiolistese, Sd manguito rotador, DDQ, LuxaÃ§Ã£o e Instabilidade do cotovelo, LAC/LEC, Epicondilites, Fraturas do cotovelo
  - **Tentativas realizadas:**
    1. Event delegation no container
    2. Onclick inline com aspas simples: `onclick="togglePendencia('${id}')"`
    3. Escape de aspas com `replace(/'/g, "\\'")`
    4. Event delegation como fallback (touchend + click)
    5. RemoÃ§Ã£o de verificaÃ§Ã£o que bloqueava event delegation
    6. AtualizaÃ§Ã£o agressiva do Service Worker (limpar caches, desregistrar SWs antigos)
    7. Limpeza manual de cache no Safari (Ajustes â†’ Safari â†’ AvanÃ§ado)
    8. âŒ **TENTATIVA INCORRETA:** Uso de `JSON.stringify()` no onclick - gera HTML invÃ¡lido
  - **Status:** PROBLEMA PERSISTE - Enviado para consulta externa (GPT/Opus) com caso tÃ©cnico completo
  - **Arquivos de referÃªncia:** `docs/CASO_CONSULTA_EXTERNA_FINAL.md`, `diagnostico_final.py`
  - **ObservaÃ§Ã£o importante:** CÃ³digo funciona perfeitamente no MacBook, indicando que problema Ã© especÃ­fico do iOS Safari/PWA, nÃ£o do cÃ³digo em si

- âœ… **BUG CRÃTICO DESCOBERTO E CORRIGIDO (03/12/2025):** JSON.stringify no onclick gera HTML invÃ¡lido
  - **Causa Raiz:** `JSON.stringify(temaIdStr)` retorna string COM aspas duplas: `"\"1733174400000_5\""`. Quando interpolado em `onclick="togglePendencia(${json})"`, gera HTML invÃ¡lido: `onclick="togglePendencia("1733174400000_5")"` - as aspas duplas fecham o atributo prematuramente.
  - **Por que nÃ£o foi detectado antes:** Navegadores desktop podem ser mais permissivos com HTML mal formado. iPhone (PWA) Ã© mais estrito.
  - **SoluÃ§Ã£o aplicada:** Reverter para escape manual com aspas simples: `temaIdStr.replace(/'/g, "\\'").replace(/\\/g, "\\\\")` e usar `onclick="togglePendencia('${temaIdEscaped}')"`. Isso gera HTML vÃ¡lido: `onclick="togglePendencia('1733174400000_5')"`.
  - **LiÃ§Ã£o:** JSON.stringify Ã© Ãºtil para JSON, mas NÃƒO para interpolaÃ§Ã£o em atributos HTML. Aspas duplas retornadas por JSON.stringify quebram atributos HTML que usam aspas duplas. Sempre usar escape manual + aspas simples para atributos onclick.
  - **PrevenÃ§Ã£o:** NUNCA usar JSON.stringify diretamente em atributos HTML. Sempre usar escape manual + aspas simples. Testar geraÃ§Ã£o de HTML com script antes de implementar.
  - **Arquivos:** `docs/DESCOBERTA_BUG_JSON_STRINGIFY.md`, `analise_json_stringify.py`

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸ PROBLEMAS CONHECIDOS (AINDA NÃƒO RESOLVIDOS)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[SERÃ ATUALIZADO COM PROBLEMAS IDENTIFICADOS]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¡ LIÃ‡Ã•ES APRENDIDAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**2025-11-29:**
- ğŸ’¡ CriaÃ§Ã£o de HTML interativo Ã© uma das tarefas mais leves e rÃ¡pidas (2/10 de dificuldade)
- ğŸ’¡ Ter um template/estrutura pronta facilita muito a criaÃ§Ã£o de novos documentos
- ğŸ’¡ ValidaÃ§Ã£o automatizada garante qualidade e consistÃªncia
- ğŸ’¡ DocumentaÃ§Ã£o tÃ©cnica bem feita permite replicaÃ§Ã£o rÃ¡pida em outros projetos
- ğŸ’¡ OrganizaÃ§Ã£o e estrutura sÃ£o fundamentais para criaÃ§Ã£o eficiente
- ğŸ’¡ HTML standalone Ã© melhor para compartilhamento do que integraÃ§Ã£o direta

**2025-12-02:**
- ğŸ’¡ **Event delegation Ã© mais robusto que onclick inline** - Funciona mesmo com elementos filhos e evita problemas com IDs invÃ¡lidos
- ğŸ’¡ **Sempre validar IDs antes de usar** - IDs undefined/null podem quebrar silenciosamente funÃ§Ãµes JavaScript
- ğŸ’¡ **ConsistÃªncia de tipos no Set() Ã© crÃ­tica** - Garantir que sempre use o mesmo tipo (string) para comparaÃ§Ãµes funcionarem
- ğŸ’¡ **pointer-events: none em elementos filhos** - Evita que elementos filhos interceptem eventos de clique do elemento pai
- ğŸ’¡ **Problemas intermitentes podem ser causados por dados inconsistentes** - Alguns itens funcionam e outros nÃ£o geralmente indica problema com dados, nÃ£o cÃ³digo
- ğŸ’¡ **NUNCA adicionar event listeners dentro de funÃ§Ãµes de renderizaÃ§Ã£o** - Isso cria mÃºltiplos listeners que causam travamentos e comportamentos estranhos. Sempre adicionar listeners apenas uma vez durante inicializaÃ§Ã£o
- ğŸ’¡ **Usar funÃ§Ãµes nomeadas para event handlers quando precisar remover depois** - Permite remover listeners antigos antes de adicionar novos, evitando acÃºmulo
- ğŸš¨ **CRÃTICO: PLATAFORMA Ã‰ USADA PRINCIPALMENTE NO IPHONE - SEMPRE TESTAR/AJUSTAR PARA MOBILE PRIMEIRO!** - UsuÃ¡rio usa principalmente pelo iPhone, nÃ£o desktop. Sempre adicionar suporte explÃ­cito para eventos touch (touchend) alÃ©m de click. NÃ£o assumir que funciona em mobile sÃ³ porque funciona em desktop. Este erro jÃ¡ aconteceu mÃºltiplas vezes - SEMPRE pensar em mobile primeiro!

**2025-12-03:**
- âœ… **PROBLEMA CRÃTICO RESOLVIDO:** renderCaderno criava anotaÃ§Ãµes vazias que sobrescreviam importadas
  - **Causa:** `renderCaderno()` chamava `obterOuCriarAnotacao()` para TODOS os temas, criando anotaÃ§Ãµes vazias que sobrescreviam as importadas
  - **SoluÃ§Ã£o:** Removido `obterOuCriarAnotacao()` automÃ¡tico. Agora sÃ³ cria anotaÃ§Ã£o quando usuÃ¡rio realmente edita
  - **PrevenÃ§Ã£o:** NUNCA criar dados automaticamente em funÃ§Ãµes de renderizaÃ§Ã£o. SÃ³ criar quando usuÃ¡rio interage explicitamente
  - **LiÃ§Ã£o:** RenderizaÃ§Ã£o deve ser READ-ONLY. NÃ£o deve criar/modificar dados, apenas exibir

- âœ… **PROBLEMA CRÃTICO RESOLVIDO:** Aba PendÃªncias travando por mÃºltiplos event listeners
  - **Causa:** `togglePendencia()` chamava `inicializarEventListenersPendencias()` apÃ³s cada toggle, criando mÃºltiplos listeners que causavam travamentos
  - **SoluÃ§Ã£o:** Removida funÃ§Ã£o `inicializarEventListenersPendencias()` completamente. Voltado para onclick inline (mesma soluÃ§Ã£o das outras abas que funcionam)
  - **PrevenÃ§Ã£o:** NUNCA re-inicializar event listeners dentro de funÃ§Ãµes que sÃ£o chamadas frequentemente. Se outras abas funcionam com onclick inline, usar a mesma abordagem
  - **LiÃ§Ã£o:** Simplicidade > Complexidade. Se onclick inline funciona nas outras abas, usar a mesma soluÃ§Ã£o. NÃ£o complicar com event delegation quando nÃ£o Ã© necessÃ¡rio

**2025-12-12:**
- ğŸ‰ **VITÃ“RIA COMPLETA: Sistema de AtualizaÃ§Ã£o AutomÃ¡tica para PWA no iPhone**
  - **Problema:** iPhone nÃ£o atualizava automaticamente quando havia mudanÃ§as. UsuÃ¡rio tinha que fechar e reabrir app manualmente. Service Worker cached nÃ£o detectava novas versÃµes. FrustraÃ§Ã£o constante: "sempre na mesma lama".
  - **SoluÃ§Ã£o Implementada:**
    1. Sistema de detecÃ§Ã£o automÃ¡tica de novas versÃµes via Service Worker
    2. NotificaÃ§Ã£o visual quando hÃ¡ atualizaÃ§Ã£o disponÃ­vel ("ğŸ”„ Nova versÃ£o disponÃ­vel!")
    3. BotÃ£o "Atualizar Agora" para forÃ§ar atualizaÃ§Ã£o imediata
    4. Limpeza automÃ¡tica de cache antigo ao iniciar
    5. VerificaÃ§Ã£o periÃ³dica de atualizaÃ§Ãµes (a cada 1 minuto)
    6. Versionamento correto do Service Worker (`CACHE_NAME`)
  - **Resultado:** âœ… **FUNCIONOU PERFEITAMENTE!** BotÃ£o apareceu no iPhone, usuÃ¡rio atualizou sem problemas. **"ETAPA VENCIDA E SUPERADA!"**
  - **LiÃ§Ãµes CrÃ­ticas:**
    1. **Push para GitHub Ã© ESSENCIAL** - Sem push, iPhone nunca atualiza. GitHub Pages serve versÃ£o do repositÃ³rio.
    2. **Versionamento do Service Worker** - Mudar `CACHE_NAME` forÃ§a detecÃ§Ã£o de nova versÃ£o. Formato: `vrvs-v5.X-feature-YYYYMMDD`.
    3. **NotificaÃ§Ã£o visual funciona** - UX melhor que atualizaÃ§Ã£o silenciosa. UsuÃ¡rio vÃª claramente quando hÃ¡ atualizaÃ§Ã£o.
    4. **Processo completo necessÃ¡rio** - CÃ³digo â†’ Commit â†’ **Push** â†’ Teste. NÃ£o adianta sÃ³ mudar cÃ³digo localmente.
  - **Processo Correto para Futuro:**
    1. Fazer mudanÃ§as no cÃ³digo
    2. Atualizar `CACHE_NAME` no `sw.js`
    3. Atualizar versÃ£o no `index.html` (`APP_VERSION`, `SW_VERSION`)
    4. Commit das mudanÃ§as
    5. **PUSH PARA GITHUB** â† CRÃTICO!
    6. Aguardar 1-2 minutos (GitHub Pages atualiza)
    7. Testar no iPhone (deve aparecer notificaÃ§Ã£o)
  - **PrevenÃ§Ã£o:** NUNCA esquecer o push. Sempre atualizar `CACHE_NAME` quando mudar cÃ³digo. Sistema agora detecta automaticamente e notifica usuÃ¡rio.
  - **Status:** âœ… **VITÃ“RIA COMPLETA!** ğŸ‰ğŸŠğŸš€

**2025-12-12 (ContinuaÃ§Ã£o):**
- âœ… **ERRO CRÃTICO RESOLVIDO:** AplicaÃ§Ã£o nÃ£o abria apÃ³s correÃ§Ãµes (SyntaxError)
  - **Causa:** Faltava fechar o `if` na funÃ§Ã£o `initApp` (linha 8642). Bloqueava todo o JavaScript.
  - **Sintoma:** Arquivo nÃ£o carregava, console mostrava erro de sintaxe.
  - **SoluÃ§Ã£o:** Adicionado fechamento `}` do `if` que verifica `typeof initApp !== 'undefined'`.
  - **LiÃ§Ã£o:** Sempre verificar fechamento de blocos apÃ³s modificaÃ§Ãµes. Erro de sintaxe bloqueia tudo.
  - **PrevenÃ§Ã£o:** Usar linter/formatter para detectar erros de sintaxe antes de testar.

- âœ… **ERRO CRÃTICO RESOLVIDO:** ImportaÃ§Ã£o nÃ£o funcionava - IDs duplicados
  - **Causa:** Havia duas seÃ§Ãµes de importaÃ§Ã£o com os mesmos IDs (`importDados`, `importHistorico`, `importAnotacoes`):
    1. SeÃ§Ã£o antiga `id="importar"` (oculta, linha 2165)
    2. SeÃ§Ã£o nova na aba "Backup" `id="backup"` (ativa, linha 2385)
  - **Problema:** `document.getElementById()` retornava o primeiro elemento encontrado (seÃ§Ã£o oculta), entÃ£o quando usuÃ¡rio selecionava arquivo na aba Backup, o cÃ³digo nÃ£o encontrava.
  - **Sintoma:** Console mostrava `dadosFile: false` mesmo com arquivo selecionado.
  - **SoluÃ§Ã£o:** Removida seÃ§Ã£o antiga duplicada. Mantida apenas a seÃ§Ã£o na aba Backup.
  - **LiÃ§Ã£o:** IDs devem ser ÃšNICOS em todo o documento. Nunca duplicar IDs, mesmo em seÃ§Ãµes ocultas.
  - **PrevenÃ§Ã£o:** Sempre verificar se IDs sÃ£o Ãºnicos antes de criar novos elementos. Usar `querySelectorAll('#id')` para detectar duplicatas.
  - **Resultado:** âœ… ImportaÃ§Ã£o funcionando perfeitamente (Dados: 34 registros, HistÃ³rico: 98 registros)

**2025-12-12 (ContinuaÃ§Ã£o - CorreÃ§Ãµes Analytics):**
- âœ… **PROBLEMA RESOLVIDO:** Performance mÃ©dia mostrava "1%" incorretamente
  - **Causa Raiz:** CÃ¡lculo estava correto (`Math.round(... * 100)`), mas ordem de operaÃ§Ãµes podia causar arredondamento prematuro em alguns casos. Problema real: dados do histÃ³rico podem ter valores muito baixos ou formato incorreto.
  - **SoluÃ§Ã£o TÃ©cnica:** Garantir multiplicaÃ§Ã£o por 100 ANTES de dividir e arredondar. CÃ³digo: `Math.round(historicoAtivo.reduce((sum, h) => sum + (h.rendimento || 0), 0) / historicoAtivo.length * 100)`. Adicionado log para debug: `console.log('[RESUMO] Rendimento mÃ©dio calculado:', rendimentoMedio, '%')`.
  - **Por que funcionou:** Ordem de operaÃ§Ãµes garante que multiplicaÃ§Ã£o acontece apÃ³s divisÃ£o, evitando perda de precisÃ£o. Log ajuda identificar se problema Ã© cÃ¡lculo ou dados.
  - **PrevenÃ§Ã£o:** Sempre multiplicar por 100 DEPOIS da divisÃ£o em cÃ¡lculos de porcentagem. Adicionar logs para debug de cÃ¡lculos crÃ­ticos.
  - **LocalizaÃ§Ã£o:** `docs/index.html` linha ~8123

- âœ… **PROBLEMA RESOLVIDO:** GrÃ¡ficos nÃ£o apareciam na aba Analytics (mobile)
  - **Causa Raiz:** Chart.js pode nÃ£o estar carregado quando `renderAnalyticsGraficos()` Ã© chamado, ou canvas nÃ£o existe no DOM ainda (timing issue). `requestAnimationFrame` sozinho nÃ£o garante que Chart.js estÃ¡ disponÃ­vel.
  - **SoluÃ§Ã£o TÃ©cnica:** Criada funÃ§Ã£o `tentarRenderizarGraficos()` com retry automÃ¡tico:
    1. Verifica se `typeof Chart === 'undefined'` â†’ retry apÃ³s 100ms
    2. Verifica se canvas existem no DOM â†’ retry apÃ³s 100ms
    3. SÃ³ renderiza quando ambos estÃ£o prontos
  - **CÃ³digo Implementado:**
    ```javascript
    const tentarRenderizarGraficos = () => {
        if (typeof Chart === 'undefined') {
            setTimeout(tentarRenderizarGraficos, 100);
            return;
        }
        const canvasBarras = document.getElementById('chartBarrasAnalytics');
        // ... verifica outros canvas
        if (!canvasBarras || !canvasLinha || !canvasRadar) {
            setTimeout(tentarRenderizarGraficos, 100);
            return;
        }
        // Renderiza quando tudo estÃ¡ pronto
        renderChartBarras('chartBarrasAnalytics');
        // ...
    };
    requestAnimationFrame(() => {
        setTimeout(tentarRenderizarGraficos, 50);
    });
    ```
  - **Por que funcionou:** Retry automÃ¡tico garante que Chart.js e DOM estÃ£o prontos antes de renderizar. CombinaÃ§Ã£o de `requestAnimationFrame` + `setTimeout` + verificaÃ§Ã£o explÃ­cita resolve timing issues.
  - **PrevenÃ§Ã£o:** SEMPRE verificar se bibliotecas externas (Chart.js, etc.) estÃ£o carregadas antes de usar. Usar retry pattern para timing issues no mobile.
  - **LocalizaÃ§Ã£o:** `docs/index.html` linha ~8252

- âœ… **PROBLEMA RESOLVIDO:** HistÃ³rico vazio na aba Analytics
  - **Causa Raiz:** `renderHistoricoAnalytics()` era chamado antes do `tbody` existir no DOM. `requestAnimationFrame` sozinho nÃ£o garante que HTML foi inserido.
  - **SoluÃ§Ã£o TÃ©cnica:** Criada funÃ§Ã£o `tentarRenderizarHistorico()` com retry automÃ¡tico:
    1. Verifica se `document.getElementById('historicoTableBodyAnalytics')` existe
    2. Se nÃ£o existe â†’ retry apÃ³s 100ms
    3. SÃ³ renderiza quando `tbody` existe
  - **CÃ³digo Implementado:**
    ```javascript
    const tentarRenderizarHistorico = () => {
        const tbody = document.getElementById('historicoTableBodyAnalytics');
        if (!tbody) {
            setTimeout(tentarRenderizarHistorico, 100);
            return;
        }
        renderHistoricoAnalytics();
    };
    requestAnimationFrame(() => {
        setTimeout(tentarRenderizarHistorico, 50);
    });
    ```
  - **Por que funcionou:** Retry garante que DOM estÃ¡ pronto antes de tentar acessar elementos. Mesmo padrÃ£o usado para grÃ¡ficos.
  - **PrevenÃ§Ã£o:** SEMPRE verificar se elemento existe no DOM antes de usar. Usar retry pattern para elementos criados dinamicamente.
  - **LocalizaÃ§Ã£o:** `docs/index.html` linha ~8305

- âœ… **PROBLEMA RESOLVIDO:** Ãreas do Caderno e DiÃ¡rio nÃ£o iniciavam fechadas
  - **Causa Raiz:** HTML gerado nÃ£o incluÃ­a classe `collapsed` nos elementos `area-header` e `area-content`.
  - **SoluÃ§Ã£o TÃ©cnica:** Adicionar `class="area-header collapsed"` e `class="area-content collapsed"` diretamente no HTML gerado por `renderCadernoV2()` e `renderDiarioPorData()`/`renderDiarioPorTema()`.
  - **CÃ³digo Implementado:**
    ```javascript
    // Caderno
    html += `<div class="area-header collapsed" onclick="toggleAreaCaderno('${areaId}')">`;
    html += `<div class="area-content collapsed" id="area-content-${areaId}">`;
    
    // DiÃ¡rio por Data
    html += `<div class="area-header collapsed" onclick="toggleAreaCaderno('${dataId}')">`;
    html += `<div class="area-content collapsed" id="area-content-${dataId}">`;
    ```
  - **Por que funcionou:** CSS jÃ¡ tinha regras para `.collapsed` (max-height: 0, opacity: 0). SÃ³ faltava aplicar classe no HTML gerado.
  - **PrevenÃ§Ã£o:** Verificar se classes CSS estÃ£o sendo aplicadas no HTML gerado dinamicamente. CSS sem classe no HTML nÃ£o funciona.
  - **LocalizaÃ§Ã£o:** `docs/index.html` linha ~7891 (Caderno), ~7527 (DiÃ¡rio)

- âœ… **PROBLEMA RESOLVIDO:** Campo de data nÃ£o existia no modal "Nova Entrada DiÃ¡rio"
  - **Causa Raiz:** Modal nÃ£o tinha campo de data. UsuÃ¡rio queria poder escolher data retroativa.
  - **SoluÃ§Ã£o TÃ©cnica:** Adicionado `<input type="date" id="novaDiarioData">` no modal. FunÃ§Ã£o `abrirNovaEntradaDiario()` preenche com data atual por padrÃ£o. FunÃ§Ã£o `salvarEntradaDiario()` usa valor do campo ao salvar. FunÃ§Ã£o `editarEntradaDiario()` preenche campo ao editar.
  - **CÃ³digo Implementado:**
    ```html
    <div class="form-group">
        <label class="form-label">ğŸ“… Data</label>
        <input type="date" class="form-input" id="novaDiarioData">
    </div>
    ```
    ```javascript
    // Ao abrir modal
    const hoje = new Date().toISOString().split('T')[0];
    document.getElementById('novaDiarioData').value = hoje;
    
    // Ao salvar
    const data = document.getElementById('novaDiarioData').value || hoje;
    entrada.data = data;
    ```
  - **Por que funcionou:** Input type="date" funciona nativamente no mobile. Preencher com data atual por padrÃ£o melhora UX.
  - **PrevenÃ§Ã£o:** Sempre considerar campos de data em formulÃ¡rios que podem precisar de datas retroativas.
  - **LocalizaÃ§Ã£o:** `docs/index.html` linha ~1642 (HTML), ~7363 (JS abrir), ~7424 (JS salvar)

- âš ï¸ **PROBLEMA PARCIALMENTE RESOLVIDO:** Cursor piscando fora dos boxes no mobile
  - **Causa Raiz:** Quando teclado aparece no mobile, viewport muda e navegador pode renderizar cursor em posiÃ§Ã£o incorreta. Problema comum em iOS Safari.
  - **SoluÃ§Ã£o TÃ©cnica Parcial:** Adicionado CSS:
    ```css
    .form-input:focus, .form-textarea:focus {
        position: relative;
        z-index: 1000;
        transform: translateZ(0); /* ForÃ§a aceleraÃ§Ã£o hardware */
        -webkit-transform: translateZ(0);
    }
    .form-input, .form-textarea {
        caret-color: var(--cobre-main); /* Define cor do cursor */
        -webkit-user-select: text;
        user-select: text;
    }
    ```
  - **Status:** âš ï¸ Ainda ocorre em alguns casos. Pode precisar de ajustes adicionais ou soluÃ§Ã£o diferente.
  - **PrÃ³ximos Passos:** Investigar soluÃ§Ãµes especÃ­ficas para iOS Safari. Pode precisar JavaScript adicional para forÃ§ar foco correto.

- âš ï¸ **PROBLEMA PENDENTE:** Campo "Ãrea" nÃ£o abre lista automaticamente ao clicar
  - **Causa Raiz:** `<input type="text" list="...">` com `<datalist>` no iOS Safari sÃ³ mostra opÃ§Ãµes quando usuÃ¡rio comeÃ§a a digitar. NÃ£o abre automaticamente ao clicar/focar.
  - **SoluÃ§Ã£o NecessÃ¡ria:** Trocar `<input list="...">` por `<select>` nativo. Select abre automaticamente ao clicar no iOS.
  - **CÃ³digo Atual:** `<input type="text" id="novaDiarioArea" list="listAreasDiario">`
  - **CÃ³digo NecessÃ¡rio:** `<select id="novaDiarioArea"><option value="">Selecione...</option>...</select>`
  - **PrevenÃ§Ã£o:** Para campos com opÃ§Ãµes prÃ©-definidas no mobile, SEMPRE usar `<select>` em vez de `<input list="...">`. Datalist nÃ£o funciona bem no iOS.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

